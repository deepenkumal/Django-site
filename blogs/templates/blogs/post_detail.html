{% extends 'base.html' %}
{% load static %}
{% block title %}
{{post.title}}
{% endblock %}

{% block css_file %}
<link rel="stylesheet" href="{% static 'blogs/post-detail.css' %}">
{% endblock %}

{% block content %}

<section class="summery">
    <div>
        <h2>{{post.title}}</h2>
        {% for tag in post_tag %}
        <span class="tag"><a href="{% url 'tag_page' tag.caption|lower %}">#{{tag.caption}}</a></span>
        {% endfor %}
        <div class="read-later">
            <form action="{% url 'read_later' %}" method="post">
                {% csrf_token %}
                <input type="hidden" name="post_id" value="{{post.id}}">
            {% if save_later %}
            <button type="submit">Read later</button>
            {% else %}
            <button type="submit">Remove from 'Read Later'</button>
            {% endif %}
            </form>
        </div>
    </div>

    <article>
        <img src="{{post.image.url}}" alt="Swimming">
        <address>By <a href="mailto:{{post.author.email_address}}">{{post.author}}</a></address>
        <div>
            last updated on <time>{{post.updated_date}}</time>
        </div>
    </article>

</section>
<div class="post-detail">
    <p>{{post.content}}</p>
</div>
<div class="comments">
    {% if comments %}
    <h2>User Comments</h2>
    <ul>
        {% for comment in comments %}
        <li>
            <h4>{{comment.user_name}}</h4>
            <p>{{comment.comment_text|linebreaks}}</p>
        </li>
        {% endfor %}
    </ul>
    {% endif %}
</div>
<div class="comment-section">
    <h2>Your Comment</h2>
    <form action="{% url 'post_detail' post.slug %}" method="POST">
        {% csrf_token %}
        {% for field in form %}
        <div class="form-control">
            {{field.label_tag}}
            {{field}}
            {{field.errors}}
        </div>
        {% endfor %}
        <button type="submit">Save comment</button>
    </form>
</div>
{% endblock %}